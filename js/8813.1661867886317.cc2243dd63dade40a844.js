"use strict";(self.webpackChunkconnect=self.webpackChunkconnect||[]).push([[8813],{6324:function(e,t,r){r.d(t,{Z:function(){return F}});var a=r(3264),n=r.n(a),o=r(6530),s=r(8590),i=r(5697),c=r.n(i),l=r(604),d=r(7971),u=r(4446),p=r.n(u);class m{constructor(e,t){this.local=e,this.useToast=t}getApiUrl(){const{apiUrl:e}=window.runConfig||{apiUrl:"https://access.stage.redhat.com/subscriptions/link/api/"};return e}async getPartnerOrderDetailsAsync(e,t,r){return insights.chrome.auth.getToken().then((a=>p().get(this.getApiUrl()+`${e}/details`,{headers:{Authorization:`Bearer ${a}`},withCredentials:!0,signal:t}).then((e=>r(null,e.data))).catch((e=>r(e)))))}async linkPartnerOrderToAccountAsync(e,t,r){return console.debug(`Linking partner=${e}, terms=${t}`),insights.chrome.auth.getToken().then((a=>p().post(this.getApiUrl()+`${e}/link`,{},{headers:{Authorization:`Bearer ${a}`},params:{termsPdfId:t,linkAllOrders:!0},withCredentials:!0}).then((e=>r(null,e.data.linkSuccessful))).catch((e=>r(e)))))}}function h(e,t){return{getRows(){return[{label:t("review-order.customer_info.customer_number"),value:e?.customerAccountId??"-"}]}}}m.propTypes={local:i.PropTypes.func.isRequired,useToast:i.PropTypes.func.isRequired},h.propTypes={orderDetails:c().object.isRequired,local:c().func.isRequired};var g=h;function f(e,t){return{getRows(){return[{label:t("review-order.customer_info.customer_number"),value:e?.tenantId??"-"}]}}}f.propTypes={orderDetails:c().object.isRequired,local:c().func.isRequired};var y=f;function b(e,t,r){switch(e){case"aws":return new g(t,r);case"azure":return new y(t,r);default:throw new Error(`Unknown partner: ${e}`)}}b.propTypes={partnerId:c().string.isRequired,orderDetails:c().object,local:c().func.isRequired};var k=b;function w(e){return{error:()=>`/${e}/error`,orderError:()=>`/${e}/order-error`,exportError:()=>`/${e}/export-error`,systemError:()=>`/${e}/system-error`,alreadyLinked:()=>`/${e}/already-linked`,unauthorized:()=>"/unauthorized",needAssistance:()=>`/${e}/need-assistance`}}var R=r(5265),E=JSON.parse('[{"code":"de_DE","name":"German","nativeName":"Deutsch"},{"code":"en_US","name":"United States (English)","nativeName":"United States (English)"},{"code":"es_ES","name":"Spanish; Castilian","nativeName":"Español, Castellano"},{"code":"fr_FR","name":"French","nativeName":"Français, Langue Française"},{"code":"it_IT","name":"Italian","nativeName":"Italiano"},{"code":"ja_JP","name":"Japanese","nativeName":"日本語 (にほんご／にっぽんご)"},{"code":"ko_KR","name":"Korean","nativeName":"한국어 (韓國語), 조선말 (朝鮮語)"},{"code":"pt_BR","name":"Portuguese","nativeName":"Português"},{"code":"ru_RU","name":"Russian","nativeName":"русский язык"},{"code":"zh_CN","name":"Chinese","nativeName":"中文 (Zhōngwén), 汉语, 漢語"}]');function T(e){const{local:t,onAgreeToTerms:r,onSelectTermsId:o,terms:s}=e,i=s[0]?.translations,[c,d]=(0,a.useState)(A()),[u,p]=(0,a.useState)(v(s)),[m,h]=(0,a.useState)(!1);return n().createElement(n().Fragment,null,n().createElement(l.TextContent,null,n().createElement(l.Text,{component:l.TextVariants.h4},t("link-account.enterprise_agreement.title")),n().createElement(l.Text,{component:l.TextVariants.h5},t("link-account.enterprise_agreement.description")),n().createElement(l.Button,{variant:"link",isInline:!0,onClick:()=>{window.open(u.downloadUrl,"_blank")}},t("link-account.enterprise_agreement.download")+` - ${c.nativeName}`," ",n().createElement(R.LA,null)),n().createElement(l.Text,{component:l.TextVariants.h5},t("link-account.enterprise_agreement.helper_text"))),n().createElement(l.FormGroup,{label:"Terms and conditions"},n().createElement(l.FormSelect,{value:c.code,onChange:e=>{let t=E.find((t=>t.code===e));d(t);let r=(e=>i.find((t=>t.localeCode===e)))(e);p(r),o(r.id)},"aria-label":"FormSelect Input"},E.map(((e,t)=>n().createElement(l.FormSelectOption,{key:t,value:e.code,label:e.nativeName})))),n().createElement(l.Checkbox,{id:"agree-check",isChecked:m,label:t("link-account.terms"),onChange:e=>{h(e),r(e)},"aria-label":"terms checkbox"})))}function A(){return E.find((e=>"en_US"===e.code))||E?.[0]||null}function v(e){let t=A(),r=e?.[0]?.translations;return r?.find((e=>e.localeCode===t.code))}T.propTypes={local:c().func.isRequired,onAgreeToTerms:c().func.isRequired,onSelectTermsId:c().func.isRequired,terms:c().array.isRequired};class C extends n().Component{constructor(){super(),this.state={mergedResponse:null,redirect:null,isAgree:!1,termsPdfId:null,submitting:!1,fetchingResponse:!1},this.abortController=new AbortController}render(){const{redirect:e,mergedResponse:t}=this.state;if(e)return n().createElement(o.Redirect,{to:e});if(!t)return n().createElement(l.Spinner,{size:"xl","aria-label":"Waiting on order content to load"});const{redHatAccountDetails:r,marketplaceDetails:a,vendorOfferings:s,terms:i}=t,{partnerId:c,local:u}=this.props,{isAgree:p,submitting:m}=this.state;return n().createElement(n().Fragment,null,n().createElement(l.TextContent,null,n().createElement(l.Text,{component:l.TextVariants.h1},"Complete your account connection")),n().createElement(d.TableComposable,null,n().createElement(d.Tbody,null,n().createElement(d.Tr,{key:"accountNumberRow"},n().createElement(d.Td,{dataLabel:"accountNumberLabel"},"Red Hat Account Number"),n().createElement(d.Td,{dataLabel:"accountNumberValue"},r.accountNumber)),new k(c,a,u).getRows().map((e=>n().createElement(d.Tr,{key:e.label},n().createElement(d.Td,{dataLabel:"Label"},e.label),n().createElement(d.Td,{dataLabel:"Value"},e.value)))),n().createElement(d.Tr,{key:"offeringNameRow"},n().createElement(d.Td,{dataLabel:"offeringNameLabel"},"Product"),n().createElement(d.Td,{dataLabel:"offeringNameValue"},s?.[0]?.description??"-")))),n().createElement(l.Form,null,n().createElement(T,{local:u,terms:i,onAgreeToTerms:e=>this.setIsAgree(e),onSelectTermsId:e=>this.setTermsPdfId(e)}),n().createElement(l.ActionGroup,null,n().createElement(l.Button,{variant:"primary",type:"button",isDisabled:!p||m,onClick:()=>this.linkAccounts()},"Link Accounts"),n().createElement(l.Button,{variant:"link"},"Cancel"))))}setMergedResponse(e){this.setState({mergedResponse:e})}setRedirect(e){this.setState({redirect:e})}setIsAgree(e){this.setState({isAgree:e})}setTermsPdfId(e){this.setState({termsPdfId:e})}setSubmitting(e){this.setState({submitting:e})}setFetchingResponse(e){this.setState({fetchingResponse:e})}bffClient(){const{local:e,useToast:t}=this.props;return new m(e,t)}fetchMergedResponse(){null!==this.state.mergedResponse||this.state.fetchingResponse||(this.setFetchingResponse(!0),this.bffClient().getPartnerOrderDetailsAsync(this.props.partnerId,this.abortController.signal,((e,t)=>{this.setFetchingResponse(!1),e?this.errorCallback(e):this.initializeMergedResponse(t)})))}initializeMergedResponse(e){e.linkedRedHatAccountId&&this.setRedirect(this.errorPaths().alreadyLinked()),this.setMergedResponse(e),this.setTermsPdfId(v(e.terms).id)}componentDidMount(){console.debug("Starting to fetch order details"),this.fetchMergedResponse()}componentWillUnmount(){console.debug("Cancelling ongoing requests..."),this.abortController.abort()}linkAccounts(){if(!this.state.submitting){const{partnerId:e}=this.props,{termsPdfId:t}=this.state;this.setSubmitting(!0),this.bffClient().linkPartnerOrderToAccountAsync(e,t,((e,t)=>{this.setSubmitting(!1),e?this.errorCallback(e):this.onLinkSuccess(t)}))}}onLinkSuccess(e){if(e){this.useToast({key:"confirm-link",message:this.local(`${this.props.partnerId}:toast-notification.confirm-link.success`),type:"success"});let e=this.state?.mergedResponse?.vendorOfferings,t=e?.[0]?.landingPage||window.runConfig.hrefConfig;console.debug("Sending to "+t),window.location.assign(t)}else this.setRedirect(this.errorPaths().error())}errorPaths(){return w(this.props.partnerId)}errorCallback(e){const t=this.errorPaths();if(console.debug("Encountered error on call: "+JSON.stringify(e)),"AbortError"!==e.reason&&"canceled"!==e.message)switch(401===e?.response?.status&&this.setRedirect(t.unauthorized()),e?.response?.data?.reason){case"terms_error":this.setRedirect(t.error());break;case"export_compliance_failure":this.setRedirect(t.exportError());break;case"linked_different_account":case"linked_same_account":this.setRedirect(t.orderError());break;default:this.setRedirect(t.systemError())}}}C.propTypes={partnerId:i.PropTypes.string.isRequired,local:i.PropTypes.func.isRequired,useToast:i.PropTypes.func.isRequired};var _=C;class S extends n().Component{static propTypes={match:i.PropTypes.object.isRequired,useToast:i.PropTypes.func.isRequired,local:i.PropTypes.func.isRequired};constructor(e){super(e)}getPartnerId(){return this.props.match.params.partnerId}render(){const e=this.getPartnerId(),{local:t,useToast:r}=this.props;return n().createElement(_,{partnerId:e,local:t,useToast:r})}}var P=S;class H extends n().Component{constructor(e){super(),this.state={notifObject:[]}}setNotification(e){this.state.notifObject.push({key:e.key,message:e.message,type:e.type}),setTimeout((()=>{if(this.state.notifObject){let t=this.state.notifObject.filter((t=>t.key!==e.key));this.setState({notifObject:t})}}),5e3)}componentWillReceiveProps(e){let t=e.toastData;t.key&&this.setNotification(t)}render(){return n().createElement(n().Fragment,null,this.state.notifObject.length>0&&n().createElement("ul",{className:"pf-c-alert-group pf-m-toast"},this.state.notifObject.map((e=>n().createElement("li",{className:"pf-c-alert-group__item",key:"toast-"+e.key},n().createElement("div",{className:"pf-c-alert pf-m-"+e.type},n().createElement("div",{className:"pf-c-alert__icon"},"success"===e.type&&n().createElement("i",{className:"fas fa-check-circle","aria-hidden":"true"}),"danger"===e.type&&n().createElement("i",{className:"fas fa-info-circle","aria-hidden":"true"}),"info"===e.type&&n().createElement("i",{className:"fas fa-info-circle","aria-hidden":"true"})),n().createElement("h4",{className:"pf-c-alert__title"},n().createElement("div",{className:"pf-c-alert__description"},n().createElement("p",null,e.message)))))))))}}var I=H,N=(r(8119),r(9116)),L=function(e){const{local:t}=e;return n().createElement(n().Fragment,null,n().createElement(l.Card,{id:"notification-card"},e.headerKey&&n().createElement(l.CardTitle,null,t(e.headerKey)),e.bodyKey&&n().createElement(l.CardBody,null,t(e.bodyKey)),e.footerKey&&n().createElement(l.CardFooter,null,n().createElement(N.c,{i18nKey:e.footerKey},"Please return to your ",n().createElement("a",{target:"blank"},"marketplace console")))))};function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x.apply(this,arguments)}var O=function(e){return n().createElement(L,x({headerKey:`${e.type}.header`,bodyKey:`${e.type}.body`,footerKey:`${e.type}.footer`},e))};function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},q.apply(this,arguments)}class $ extends n().Component{constructor(e){super(e),this.state={newToast:{},userDetails:{}},this.toast=e=>{this.setState({newToast:e})},this.setUserDetails=e=>{this.setState({userDetails:e})}}componentDidMount(){insights.chrome.init(),insights.chrome.identifyApp("connect"),window.history.pushState(null,null,window.location.href),window.onpopstate=function(){window.history.go(1)}}componentWillUnmount(){const e=insights.chrome.on("APP_NAVIGATION",(e=>history.push(`/${e.navId}`)));return()=>{e()}}render(){let e=w(":partnerId");return n().createElement(n().Fragment,null,n().createElement(I,{toastData:this.state.newToast}),n().createElement(o.Switch,null,n().createElement(o.Route,{exact:!0,path:"/"},n().createElement(O,{local:this.props.t,type:"default-error"})),n().createElement(o.Route,{path:e.alreadyLinked()},n().createElement(O,{local:this.props.t,type:"already-linked"})),n().createElement(o.Route,{path:[e.error(),e.orderError(),e.exportError(),e.systemError()]},n().createElement(O,{local:this.props.t,type:"general-error"})),n().createElement(o.Route,{path:e.needAssistance()},n().createElement(O,{local:this.props.t,type:"need-assistance"})),n().createElement(o.Route,{path:"/:partnerId/start",render:e=>n().createElement(P,q({local:this.props.t,i18n:this.props.i18n,useToast:this.toast,setUserDetails:this.setUserDetails,getErrorPaths:w},e))})))}}var F=(0,s.Z)("aws")($)},3764:function(e,t,r){var a=r(9216);const{hrefConfig:n,hrefEnv:o}=window.runConfig||{hrefConfig:"https://access.redhat.com/",hrefEnv:""};var s={_comment:"English",locale:"en_us","system-error":{header:"A system error has occurred",body:"Please go back and try again.",footer:"Go Back"},"general-error":{header:"An issue has occurred",body:"An issue has occurred with your AWS order.",footer:'If the issue persists, please contact <1 href="https://access.redhat.com/">Red Hat customer support</1>.'},"already-linked":{header:"Already linked",body:"Your AWS order has already been linked.",footer:'Please return to the <1 href="https://console.aws.amazon.com">AWS console</1> to get started!'},logout:{header:"Logout successful",body:"Logged out successfully."},"reset-password":{header:"Reset password","a-body":`To reset your password, visit the <a href='https://sso.${o}redhat.com/auth/realms/redhat-external/protocol/openid-connect/forgot-credentials?client_id=partner-link&redirect_uri=${n}subscriptions/link/reset-password-complete&response_type=code&scope=openid' target='_blank'>reset password</a> page.`,"b-body":"After resetting your password, return to AWS Marketplace and restart process.",footer:"Reset your password"},"reset-password-complete":{header:"Reset password complete",body:"Return to AWS Marketplace and restart the linking process."},"token-error":{header:"An error has occurred","a-body":"Please return to AWS Marketplace and restart the linking process.","b-body":"If the issue persists, please contact Red Hat Customer Support.",footer:"Contact Red Hat Customer Support"},"landing-page":{header:"Welcome to the Red Hat gateway for cloud marketplaces",body:"Linking your AWS account to a Red Hat account gives you access to everything needed to keep your systems running and solve problems quickly. This access includes resources like Red Hat's community of experts, knowledge resources, security updates, and support tools that you can't get anywhere else.",prompt:"To get started, log in to your Red Hat account or create a new one.",button:"Log in to Red Hat",registerlink:"Create a new account"},unauthorized:{header:"Your Red Hat session has expired",body:"Please return to AWS Marketplace and restart the linking process."},"app-layout":{review:"Review order summary",link:"Link your Red Hat Account",learn:"Learn More",privacy:"<a href='https://www.redhat.com/en/about/privacy-policy' target='blank'>Privacy statement </a>",terms:"<a href='https://www.redhat.com/en/about/terms-use' target='blank'>Terms of use </a>",policy:"<a href='https://www.redhat.com/en/about/all-policies-guidelines' target='blank'>All policies and guidelines </a>",landing:"Welcome to Red Hat Partner Link Portal"},"need-assistance":{header:"Need assistance?",body:"For inquiries related to your account linking, contact Red Hat Customer Support.",footer:'<1 href="https://access.redhat.com">Red Hat Customer Support</1>'},"learn-more":{header:"Learn more",description:"You're all set. You can now access your Red Hat subscriptions from your AWS order in your linked Red Hat account."},"review-order":{header:"Access subscription benefits for your Red Hat Openshift Service",headline:"Link your AWS and Red Hat Accounts",description:"Get support from Red Hat... Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam..",customer_info:{title:"AWS Customer information",customer_number:"Account Id",product:"Product",customer_identifier:"Customer Identifier"},footer:"If this is the correct customer account, click Next to continue.",button:{next:"Next",cancel:"Cancel"}},"link-account":{header:"Link your Red Hat account",description:"Review your Red Hat account details below. If the information is not correct and you need help, contact Red Hat Customer Support.",account_detail:{title:"Account details",red_hat_login:"Red Hat login:",email_address:"Email address:",red_hat_account_number:"Red Hat Account Number:",company:"Company:",titles:"Title:",first_name:"First Name:",last_name:"Last Name:",region:"Country or Region:",address:"Address 1:",postal_code:"Postal Code:",city:"City:",county:"County:",state:"State:",phone_number:"Phone number:"},link_accounts:{title:"Auto-link opt-in",required_fields:"*Required fields",checkbox_label:"Automatically link your future purchases of Red Hat products from AWS to your Red Hat Account."},enterprise_agreement:{title:"Enterprise agreement",description:"To read the Red Hat Enterprise Agreement document (PDF), select your preferred language and location from the dropdown menu.",download:"Download",helper_text:"Change agreement's location and language"},enterprise_agreement_default_lang:{name:"United States (English)"},terms:"*I have read and agree to the terms. ",button:{confirm:"Confirm",back:"Back",cancel:"Cancel"}},"toast-notification":{"confirm-link":{success:"Success! Your Red Hat account is now linked with your AWS Order."}}},i=r(6071),c=r(7031);const{hrefConfig:l,hrefEnv:d}=window.runConfig||{hrefConfig:"https://access.redhat.com/",hrefEnv:""},u={en:{aws:s,common:{_comment:"English",locale:"en_us","system-error":{header:"A system error has occurred",body:"Please go back and try again.",footer:"Go Back"},"default-error":{header:"An issue has occurred.",body:"Please go back and try again.",footer:"Please restart the linking process."},"already-linked":{header:"Already linked",body:"Your order has already been linked.",footer:"Go Back"},logout:{header:"Logout successful",body:"Logged out successfully."},"reset-password":{header:"Reset password","a-body":`To reset your password, visit the <a href='https://sso.${d}redhat.com/auth/realms/redhat-external/protocol/openid-connect/forgot-credentials?client_id=partner-link&redirect_uri=${l}subscriptions/link/reset-password-complete&response_type=code&scope=openid' target='_blank'>reset password</a> page.`,"b-body":"After resetting your password, return to Marketplace and restart process.",footer:"Reset your password"},"reset-password-complete":{header:"Reset password complete",body:"Return to Marketplace and restart the linking process."},"token-error":{header:"An error has occurred","a-body":"Please return to Marketplace and restart the linking process.","b-body":"If the issue persists, please contact Red Hat Customer Support.",footer:"Contact Red Hat Customer Support"},unauthorized:{header:"Your Red Hat session has expired",body:"Please return to Marketplace and restart the linking process."},"app-layout":{review:"Review order summary",link:"Link your Red Hat Account",learn:"Learn More",privacy:"<a href='https://www.redhat.com/en/about/privacy-policy' target='blank'>Privacy statement </a>",terms:"<a href='https://www.redhat.com/en/about/terms-use' target='blank'>Terms of use </a>",policy:"<a href='https://www.redhat.com/en/about/all-policies-guidelines' target='blank'>All policies and guidelines </a>",landing:"Welcome to Red Hat Partner Link Portal"},"need-assistance":{header:"Need assistance?","a-body":"For inquiries related to your account linking, contact RedHat Customer Support.","b-body":`Check out this <a href='${l}articles/5024951' target='blank'>FAQ</a> article in the Red Hat Customer Portal for more information about how Red Hat supports Cloud Account Linking`,footer:"Contact RedHat Support"},"learn-more":{header:"Learn more",description:"You're all set. You can now access your Red Hat subscriptions from your order in your linked Red Hat account."},"landing-page":{header:"Welcome to the Red Hat gateway for cloud partners",body:"we recommend that you link your Red Hat account or create a new one",prompt:"To get started, log in or register.",button:"Log in to Red Hat",registerlink:"Create a new account"}}}};a.Z.use(i.Z).use(i.Z).use(c.Db).init({fallbackLng:"en",order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag","path","subdomain"],resources:u,debug:!1,languages:["en"],react:{useSuspense:!1},interpolation:{escapeValue:!1},ns:["aws","ibm-dsw","common"],fallbackNS:"common"})},7311:function(e,t,r){function a(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()})).catch((e=>{console.error(e.message)}))}r.d(t,{E:function(){return a}}),r(4155),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))}}]);
//# sourceMappingURL=../sourcemaps/8813.87d66aff07d12c2fd00c0c1f24c4a71b.js.map